### 第一章
引言
> 数据库管理系统（DBMS）由一个互相关联的数据集合和一组用于访问这些数据的程序组成，其中数据集合称为**数据库**。
> 数据库系统的目的是存储大量信息，其中包括定义信息结构，信息操作和维护信息安全

#### 1.1数据库系统的应用

#### 1.2数据库系统的目标
这里我们以计算机系统中的**文件处理系统**的弊端来对比
- 数据冗余和不一致：表现为不同的程序员创建的文件数据结构不一致-->同一类型文件会出现多次
- 数据访问困难：例如我把某一类元素提取出来，这是我可能要根据不通的需求写不通的脚本
- 完整性问题：例如数据的范围限制
- 原子性问题：传统的文件系统不支持回滚的操作
- 并发性问题
- 安全性问题：限制用户的访问权限（相比于计算机系统的权限限制更为复杂）

#### 1.3 数据视图
&emsp;之前提到数据库系统是数据和程序的集合，为了方便用户使用，系统需要提供一个数据的抽象视图，同时隐藏数据存储和维护的细节

##### 1.3.1 数据抽象
为了高效检索数据我们需要设计复杂的数据结构来表示数据，包含以下几个层面
- 物理层：数据是如何存储的
- 逻辑层：数据间的关系
- 视图层：只关注数据库的某一部分

用以平常编写的代码例子来类比上述三个层面的关系
定义以下类型：  
```
type instructor = record
	ID:char(5);
	name:char(20);
	dept_name:char(20);
	salary:numeric(8,2);
	end;
```
- 物理层：上述的字段可能被描述成一块连续的存储块，但是我们并不清楚，我们也不关心，因为编译器已经屏蔽了这个细节。同理数据库系统为数据库程序设计人员页屏蔽了这一细节
- 逻辑层：我们需要定义字段的类型，并且之间的关系，这是程序员需要做的。同理数据库管理员经常做的也是这些
- 视图层：用户能看到我代码设计出来的程序，但是仅仅是我想让他看到的，比如博客网站，他并且能访问，别人加密的信息。同理数据库管理员来说，某大学注册办公室的老师只能访问学生信息但不能访问老师信息

##### 1.3.2 实例和模式
数据库的信息可能会重复删除，插入，但是结构不变，例如学生有名字，学号等属性。其中数据库的信息就称为**实例**，结构就称为**模式**。可以对比程序设计语言中的类和实例

前面介绍了几种抽象层次：物理模式，逻辑模式，视图模式。其中视图模式由分了几种模式所以视图模式也称为**子模式**。

因为程序员是与逻辑模式打交道，所以逻辑模式是最重要的模式，通常物理模式隐藏在逻辑模式之下，且通常应用程序不依赖于物理模式，所以称之为具有物理数据独立性。

##### 1.3.3 数据模型
数据库结构的基础是**数据模型**：描述数据，数据联系，数据语义以及一致性约束的概念工具集合。数据模型提供了一种描述物理层，逻辑层和视图层**数据库设计**的方式。
下列介绍四种数据模型  
- 关系模型：用表的集合来表示数据和数据间的联系。即列表示属性，行表示是个实例
- 实体-联系模型：由现实世界得来，即现实世界由一系列实体，和实体间的联系构成。
- 基于对象的数据模型：面向对象的程序设计已经是主导地位的软件开发方法了，这也导致了，面向对象数据模型的发展，面向对象那个的数据模型可以堪称E-R模型的扩展。
- 半结构化数据模型：允许相同类型的数据项含有不同的属性集。之前提到了数据模型特定的数据项必须有相同的属性集。可扩展标记语言XML被广泛表示半结构化数据。
- 网状数据模型，层次数据模型(使用树形结构表示)：更贴近底层，但也是的数据建模复杂化，现在很少使用

#### 1.4 数据库语言
>数据库系统提供**数据定义语言**来定义数据库模式，以及**数据操作语言**来表达数据库的查询，跟新。两种语言不是分离的语言，它们只是表达了数据库语言的不同部分

##### 1.4.1 数据操纵语言
数据操作语言（Data-Manipulation Language,DML)，使得用户可以访问或操纵那些按照数据模型组织起来的数据。有以下访问类型
- 对存储信息检索
- 插入信息
- 删除信息
- 修改信息
数据操纵语言有两类：
- 过程化DML ：要求用户指定要什么数据以及如何得到这些数据
- 声明式DML：指定要什么数据不指明怎么获得的
介绍自己，部门
##### 1.4.2 数据定义语言
数据库模式是通过一系列定义来说明的，这些第一右一种称为数据定义语言（Data-Dedinition Language)的特殊语言来表达

DDL语言提供了数据约束的工具
- 域约束：每个属性都定义它的类型和范围，当系统插入数据时可以方便检验
- 参照完整性：外键之间的关系
- 断言：就是数据需要某时刻满足某一条件，域约束，和参照完整性都属于一种特殊的断言。
- 授权：

和其他程序设计语言一样，DDL也是右一些输入指令生成一些输出。DDL的输出放在**数据字典中** 类似与表。数据字典包含了元数据，是数据的数据。只能右系统访问


##### 1.5 关系数据库
> 关系数据库即使用一系列表来表示数据库

##### 1.5.1 表

##### 1.5.2 数据操纵语言
SQL查询 语言是非过程化的。以几个表输入返回一个表

##### 1.5.3 数据定义语言
SQL提供了非常丰富的DDL语言，通过它我们可以定义表，完整性约束，断言等。

##### 1.5.4 来自应用程序的数据库访问
SQL不支持网络通信，从用户输入，输出到显示屏。应用程序要使用数据库有两种途径：

- 通过调用应用程序接口，将DML和DDL发给数据库，在取回数据
- 通过跨站宿主语言的语法：*留坑*

#### 1.6 数据库设计

##### 1.6.1 设计过程
1. 概念设计：决定数据数据库包含那些属性，以及如何将属性组织到多个表。两种可行的解决方法：
	- ER图
	- 引入一套算法（规范化）
2. 功能需求说明：描述数据之上的操作或事务，例如跟新，检索，删除
3. 逻辑设计阶段：将概念模型映射到数据模型上
4. 物理设计阶段：指定数据库物理特性，如文件组织的形式，和内部存储结构

##### 1.6.2 大学机构的数据库设计（例子）
（略）
##### 1.6.3 实体-联系模型（ER图）
用实体和联系描述显示世界：属性集，实体集，联系集

##### 1.6.4 规范化
目的：生成一个关系模式，且尽可能减少冗余，且方便检索数据
方法：需要设计一个适当的范式

#### 1.7 数据管理和查询

##### 1.7.1 存储管理器
存储管理器负责和数据库中存储的底层数据于应用程序提供接口的部件，存储管理器将DML语句翻译成底层文件系统命令。所以存储管理器负责数据的存储，检索和跟新
文件存储器的部件包括：  
- 权限即完整性管理器：
- 事务管理器
- 文件管理器：管理磁盘空间分配。和磁盘信息的数据结构
- 缓冲区管理器：将数据从磁盘中取出，缓冲到内存中
- 数据文件：自身
- 数据字典：存储数据库结构的元数据，尤其是数据模式
- 索引：提供一个类似于书签的高效数据指针

##### 1.7.2 查询处理器
- DDL解释器：解释DDL语句且存储在**数据字典**中
- DML编译器：翻译成低级指令（会有多种可行方案，自动选择最优的一种）


#### 1.8事务管理
事务：单一逻辑功能的操作集合


#### 1.9 数据库体系结构


#### 1.10 数据挖掘于信息检索
数据挖掘：半自动分析大型数据库并且提取有用的模式的过程
信息检索：查询文本数据。与数据库查询的区别在于重点不同，信息系统强调关键字查询，而且还有相似度的概念

#### 1.11 特种数据库
> 有别与主流的关系数据库
- 基于对象的数据模型：在ER模型的基础上增加了面向对象的几个特点：封装，方法和对象标示
- 半结构化数据模型：半结构化没有明确的模式（结构），因为他的结构变化很大，例如员工的建立有些人可能有婚姻状况这个字段，而有些人没有。XML格式是一种存储半结构化数据的一种格式，有点类似python的字典
	- 优点：方便扩展，随时添加字段
	- 缺点：查询效率低，没有固定的结构查询起来肯定慢

#### 1.12 数据库用户和管理员
>数据库系统的主要目标是检索和跟新数据，划分为数据库用户和数据库管理员
设计时考虑以下四种用户
- 无经验的用户
- 应用程序员
- 老练的用户
- 专门的用户
数据库管理员从事工作：
- 模式定义
- 存储结构及存取方式定义
- 模式及物理组织的修改
- 数据访问权限
- 日常维护
	- 定期备份
	- 确保正常运转需要磁盘空间
	- 监视数据库运行，并改善数据库的性能
#### 1.13 数据库系统的历史
> 学习这部分有助于对数据库的产品有个基本的认识，什么东西解决了什么问题
- 上世纪50-60年代：以磁带存储为主，特点是数据按顺序存储，但数据规模大
- 上世纪60-70年代：硬盘出世。可以直接对数据访问，与位置无关，而且访问数据极快仅几十毫秒。因为不用按顺序存在所以建立了网状和层次数据库，可以将表和树这种结构存储在磁盘上
	- 在这个阶段也出现了关系模型（定义了非过程化方法查询数据）。能够屏蔽一些细节，但由于性能不好，所以未被广泛使用
- 上世纪80年代：出现了第一个关系数据库SQL，并且由于前人的努力，性能也不比网状，层次的差。更重要的是它能屏蔽底层原理	- 这个阶段人们也对并行和分布式数据库进行了很多研究，面向对像数据库也有了初步的工作
- 20世纪90年代：互联网的爆炸式发展。导致数据库需要具有不停歇运行的能力，还有很高的事务处理速度，和提供web接口
- 21世界的前10年：分布式数据存储系统被构建出来，
